import {
  Card,
  CardBody,
  CardHeader,
  CardFooter,
  Avatar,
  Typography,
  Tabs,
  TabsHeader,
  Tab,
  Switch,
  Tooltip,
  Button,
} from "@material-tailwind/react";
import {
  HomeIcon,
  ChatBubbleLeftEllipsisIcon,
  Cog6ToothIcon,
  PencilIcon,
} from "@heroicons/react/24/solid";
import { Link } from "react-router-dom";
import { ProfileInfoCard, MessageCard } from "@/widgets/cards";
import { platformSettingsData, conversationsData, projectsData } from "@/data";
import React,{useState,useEffect, useCallback} from "react";
import  RemiReport  from "@/RemiReport";
import Report from "@/Report";
import Expenseheadtb from "@/Expenseheadtb";
import CryptoJS from "crypto-js";
import api from "@/ApiLink.mjs";

import AddExpense from '@/AddExpense';
export function ExpenseHead() {
  const [showinfo,setshowinfo] = useState(false);
  const [data,setdata] = useState([]);

   const decryptAndRetrieveData = useCallback((key) => {
    const encryptedData = localStorage.getItem('encryptedData');
    if (encryptedData) {
      try {
        const decryptedData = CryptoJS.AES.decrypt(encryptedData, key).toString(CryptoJS.enc.Utf8);
        return JSON.parse(decryptedData);
      } catch (error) {
        console.error('Error decrypting data: ', error);
        return null;
      }
    }
    return null;
  }, []);
  const checkstatus = () =>{
    const decrydata = decryptAndRetrieveData("Harry");
    fetch(api+'checkstats',{
      method:'POST',
      body: JSON.stringify({id: decrydata.user.id})
    })
    .then((response)=>response.json())
    .then((data)=> setdata(data))
    .catch((error) => {
      console.error('Error Fetching Data: ', error);
    });
  }

  useEffect(() => {
    const dataitem = localStorage.getItem('encryptedData');
    if(dataitem === null){
      window.location.href='/';
    }else{
      setshowinfo(true);
      // checkstatus();
    // const refresh = setInterval(checkstatus,20000);
    }
  },[]);
  return (




    <>
      {showinfo ? 
    
      <div>
      <Expenseheadtb />
      
      </div>
      :<div></div>}

    </>
  );
}

export default ExpenseHead;
